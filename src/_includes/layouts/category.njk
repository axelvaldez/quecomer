<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ cat }} Menus</title>
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body class="page-category">

    <nav>
        <a href="/" class="back-link">‚Üê Back to all menus</a>
    </nav>

    <h1>{{ cat }}</h1>
    <p class="subtitle">Best places for {{ cat | lower }} in Hermosillo</p>
    
    <div class="grid">
        {% set has_match = false %}
        
        {# Loop through global 'restaurants' data #}
        {% for filename, restaurant in restaurants %}
            
            {# Check if the current restaurant has categories AND if the current page category (cat) is in them #}
            {% if restaurant.categories and cat in restaurant.categories %}
                {% set has_match = true %}
                
                <a href="/menus/{{ restaurant.slug }}/" class="card">
                    <h2>{{ restaurant.name }}</h2>
                    <p>{{ restaurant.tagline }}</p>
                    <div class="card-meta">
                        {{ restaurant.meta.location | default("Location N/A") }}
                    </div>
                </a>
            {% endif %}
        {% endfor %}

        {# Show a message if no restaurants match this category #}
        {% if not has_match %}
            <div class="empty-state">
                No menus found for "{{ cat }}" yet. Check back soon!
            </div>
        {% endif %}
    </div>

</body>
</html>